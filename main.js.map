{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["//ОТКРЫТИЕ МОДАЛЬНОГО ОКНА\r\nexport function openPopup(popup) {\r\n  popup.classList.add('popup_is-opened');\r\n  document.addEventListener('keydown', closePopupEsc);\r\n} \r\n//ЗАКРЫТИЕ МОДАЛЬНОГО ОКНА\r\nexport function closePopup(popup) {\r\n      popup.classList.remove('popup_is-opened');\r\n      document.removeEventListener('keydown', closePopupEsc);\r\n    }\r\n//ЗАКРЫТИЕ МОДАЛЬНОГО ОКНА ESC\r\nexport function closePopupEsc(evt) {\r\n  if (evt.key === \"Escape\") {\r\n    closePopup(document.querySelector('.popup_is-opened'));\r\n  }\r\n}\r\n\r\n","const config = {\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/wff-cohort-29',\r\n  headers: {\r\n    authorization: 'dd733b9c-9d2a-4111-8e6e-6b504e32608f',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}\r\n\r\n//Загрузка данных пользователя  \r\nfunction getUserData() {\r\n return fetch(`${config.baseUrl}/users/me`, \r\n  { \r\n    method: 'GET',\r\n    headers: config.headers })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }else{\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n  })\r\n}\r\n\r\n// Загрузка карточек с сервера\r\nfunction getCards() {\r\n  return fetch(`${config.baseUrl}/cards`,\r\n  { \r\n    method: 'GET',\r\n    headers: config.headers })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }else{\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n  })\r\n}\r\n\r\nexport function loadUserData() {\r\n  return Promise.all([getUserData(), getCards()])\r\n}\r\n\r\n// Редактирование профиля \r\n \r\nexport function featchEditProfile(name, about) {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    })\r\n  })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }else{\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n  })\r\n  }\r\n\r\n  //Добавление новой карточки\r\nexport function featchNewCard(name, link) {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link,\r\n    })\r\n  })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }else{\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n  })\r\n  }\r\n\r\n  //Удаление карточки\r\n  \r\nexport function featchDeleteCard(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }else{\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n  })\r\n  }\r\n\r\n  // Постановка лайка\r\n\r\nexport function featchLikeCard(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}/likes`, {\r\n    method: 'PUT',\r\n    headers: config.headers\r\n  })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }else{\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n  })\r\n  }\r\n\r\n  // Снятие лайка\r\n\r\nexport function featchDislikeCard(cardId) {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}/likes`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }else{\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n  })\r\n  }\r\n\r\n  //Обновление аватара пользователя\r\n\r\n  export function featchEditAvatar(avatar) {\r\n    return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: config.headers,\r\n      body: JSON.stringify({\r\n        avatar: avatar,\r\n      })\r\n    })\r\n    .then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }else{\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      }\r\n    })\r\n  } ","import { openPopup } from './modal';\r\nimport { closePopup } from './modal';\r\nimport { featchDeleteCard, featchLikeCard, featchDislikeCard } from '../components/api';\r\n\r\n// ДОБАВЛЕНИЕ КАРТОЧКИ\r\n\r\nexport function addCards(link, name, cardId, likes, userId, cardOwnerId, callBacks) {\r\n  const cardTemplate = document.querySelector('#card-template').content;\r\n  const templateElement = cardTemplate.querySelector('.places__item ').cloneNode(true);\r\n  templateElement.querySelector('.card__title').textContent = name;\r\n  const deleteButton = templateElement.querySelector('.card__delete-button');\r\n  const likeButton = templateElement.querySelector('.card__like-button');\r\n  const cardImage = templateElement.querySelector('.card__image');\r\n  const cardLikes = templateElement.querySelector('.card__likes');\r\n  \r\n  cardLikes.textContent = likes.length;\r\n  if(likes.length === 0) {\r\n    cardLikes.textContent = '';\r\n  }\r\n\r\n  cardImage.src = link;\r\n  cardImage.alt = name;\r\n\r\n  if (cardOwnerId !== userId) {\r\n    templateElement.querySelector('.card__delete-button').remove(); \r\n  }\r\n\r\n  //обработчик лайка\r\n  \r\n  likeButton.addEventListener('click', function() {\r\n    \r\n    if(likeButton.classList.contains('card__like-button_is-active')) {\r\n      featchDislikeCard(cardId)\r\n      .then((data) => {\r\n        callBacks.likeCallback(likeButton);\r\n        cardLikes.textContent = data.likes.length;\r\n        if(data.likes.length === 0) {\r\n          cardLikes.textContent = '';\r\n        }\r\n        \r\n      })\r\n    } else {\r\n      featchLikeCard(cardId)\r\n      .then((data) => {\r\n        callBacks.likeCallback(likeButton);\r\n        cardLikes.textContent = data.likes.length;\r\n      })\r\n    } \r\n    })\r\n  \r\n  //обработчик открытия картинки\r\n  cardImage.addEventListener('click', function (evt) {\r\n    callBacks.openPopupCallback(evt);\r\n  });\r\n\r\n  //обработчик удаления карточки\r\n  deleteButton.addEventListener('click', function () {\r\n    const popupDeleteCard = document.querySelector('.popup_type_delete');\r\n    openPopup(popupDeleteCard);\r\n    const buttonDelete = popupDeleteCard.querySelector('.popup__button');\r\n    buttonDelete.addEventListener('click', function () {\r\n    callBacks.deleteCallback(templateElement, userId, cardOwnerId, cardId);\r\n    closePopup(popupDeleteCard);\r\n   })\r\n});\r\n\r\n  return templateElement; \r\n}\r\n\r\n// УДАЛЕНИЕ КАРТОЧКИ\r\nexport function deleteCard(placesList, userId, cardOwnerId, cardId) {\r\n  if(userId == cardOwnerId) {\r\n    featchDeleteCard(cardId)\r\n  .then(() => {\r\n    placesList.remove();\r\n  })\r\n  }\r\n}\r\n\r\n// ЛАЙК КАРТОЧКИ\r\nexport function handleLikeClick(likeButton) {\r\n // likeButton.classList.toggle('card__like-button_is-active');\r\n  if(likeButton.classList.contains('card__like-button_is-active')) {\r\n    likeButton.classList.remove('card__like-button_is-active');\r\n  } else {\r\n    likeButton.classList.add('card__like-button_is-active');\r\n  }\r\n }\r\n\r\n","export const validationConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'button_inactive',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n};\r\n\r\nconst showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n};\r\n\r\nconst toggleButtonState = (inputList, buttonElement, validationConfig) => {\r\n  if (hasInvalidInput(inputList)) {\r\n  buttonElement.disabled = true;\r\n  buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n} else {\r\n  buttonElement.disabled = false;\r\n  buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n} \r\n}\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n  return !inputElement.validity.valid;\r\n}); \r\n}\r\n\r\nconst checkInputValidity = (formElement, inputElement) => {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  }else{\r\n    inputElement.setCustomValidity('')\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n};\r\n\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  if (inputElement.classList.contains(validationConfig.inputErrorClass)) {\r\n    inputElement.classList.remove(validationConfig.inputErrorClass);\r\n    errorElement.classList.remove(validationConfig.errorClass);\r\n    errorElement.textContent = '';\r\n  }\r\n};\r\n\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n\r\n  // чтобы проверить состояние кнопки в самом начале\r\n  toggleButtonState(inputList, buttonElement, validationConfig);\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener('input', function () {\r\n      checkInputValidity(formElement, inputElement);\r\n      // чтобы проверять его при изменении любого из полей\r\n      toggleButtonState(inputList, buttonElement, validationConfig);\r\n    });\r\n  });\r\n}; \r\n\r\nexport const enableValidation = (validationConfig) => {\r\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n  formList.forEach((formElement) => {\r\n    formElement.addEventListener('submit', (evt) => {\r\n      evt.preventDefault();\r\n    });\r\n    setEventListeners(formElement, validationConfig);\r\n  });\r\n}\r\n\r\nexport const clearValidation = (validationConfig) => {\r\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n  formList.forEach((formElement) => {\r\n    const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n    const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n    inputList.forEach((inputElement) => {\r\n      hideInputError(formElement, inputElement, validationConfig);\r\n    });\r\n    toggleButtonState(inputList, buttonElement, validationConfig);\r\n  });\r\n}\r\n","import './pages/index.css'; // добавьте импорт главного файла стилей \r\nimport { addCards } from './scripts/card.js';\r\nimport { openPopup } from './scripts/modal.js';\r\nimport { closePopup } from './scripts/modal.js';\r\nimport { deleteCard } from './scripts/card.js';\r\nimport { handleLikeClick } from './scripts/card.js';\r\nimport { enableValidation } from './components/validation.js';\r\nimport { clearValidation } from './components/validation.js';\r\nimport { featchEditProfile, featchNewCard, featchEditAvatar, loadUserData } from './components/api.js';\r\n\r\n\r\nconst placesList = document.querySelector('.places__list');\r\nconst popupEdit = document.querySelector('.popup_type_edit'); \r\nconst popupNewCard = document.querySelector('.popup_type_new-card');\r\nconst popups = document.querySelectorAll('.popup')\r\nconst popupEditButton = document.querySelector('.profile__edit-button');\r\nconst popupNewCardButton = document.querySelector('.profile__add-button');\r\nconst formEditProfile = document.querySelector('.popup_type_edit');\r\nconst formAvatarProfile = document.querySelector('.popup_type_avatar');\r\nconst inputName = formEditProfile.querySelector('.popup__input_type_name');\r\nconst inputDescription = formEditProfile.querySelector('.popup__input_type_description');\r\nconst profileTitle = document.querySelector('.profile__title'); \r\nconst profileDescription = document.querySelector('.profile__description');\r\nconst formNewCard = document.querySelector('.popup_type_new-card');\r\nconst inputCardName = formNewCard.querySelector('.popup__input_type_card-name');\r\nconst inputLink = formNewCard.querySelector('.popup__input_type_url');\r\nconst popupImage = document.querySelector('.popup_type_image');\r\nconst popupImageImage = popupImage.querySelector('.popup__image');  \r\nconst popupImageCaption = popupImage.querySelector('.popup__caption');\r\nconst popupEditAvatarButton = document.querySelector('.profile__avatar-button');\r\nconst inputAvatar = formAvatarProfile.querySelector('.popup__input_type_url');\r\nconst avatarButton = document.querySelector('.avatar__button');\r\nconst newCardButton = document.querySelector('.new_card-button');\r\nconst profileButton = document.querySelector('.profile__button');\r\nconst profileImage = document.querySelector('.profile__image');\r\n\r\nconst callBacks = {\r\n  likeCallback: handleLikeClick,\r\n  openPopupCallback: openPopupImage,\r\n  deleteCallback: deleteCard,\r\n};\r\n\r\nconst validationConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'button_inactive',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n};\r\n\r\nlet userId = null;\r\nlet cardId = null;\r\n\r\n\r\nloadUserData()\r\n.then(([userData, cards]) => {\r\n  profileTitle.textContent = userData.name;\r\n  profileDescription.textContent = userData.about;\r\n  profileImage.src = userData.avatar;\r\n  userId = userData._id;\r\n  \r\n  cards.forEach((card) => {\r\n    cardId = card._id;\r\n   placesList.append(addCards(card.link, card.name, cardId, card.likes, userId, card.owner._id, callBacks));\r\n  });\r\n})\r\n.catch((err) => {\r\n  console.log(err);\r\n})\r\n\r\npopups.forEach(function(popup){\r\n  const closeButton = popup.querySelector('.popup__close')\r\n  closeButton.addEventListener('click', function () {\r\n    closePopup(popup);\r\n  })\r\n})\r\n\r\npopupEditButton.addEventListener('click', function () {\r\n  inputName.value = profileTitle.textContent;\r\n  inputDescription.value = profileDescription.textContent;\r\n  openPopup(popupEdit);\r\n  profileButton.textContent = 'Сохранить';\r\n  clearValidation(validationConfig);\r\n});\r\n\r\npopupNewCardButton.addEventListener('click', function () {\r\n  openPopup(popupNewCard);\r\n  newCardButton.textContent = 'Сохранить';\r\n  clearValidation(validationConfig);\r\n}); \r\n\r\npopupEditAvatarButton.addEventListener('click', function () {\r\n  openPopup(formAvatarProfile);\r\n  avatarButton.textContent = 'Сохранить';\r\n  clearValidation(validationConfig);\r\n});\r\n\r\npopups.forEach(function(popup) {\r\n  popup.addEventListener('click', function (evt) {\r\n    if (evt.target.classList.contains('popup_is-opened')) {\r\n      closePopup(popup);\r\n    }\r\n  })\r\n})\r\n  \r\nfunction handleProfileFormSubmit(evt) {\r\n  evt.preventDefault();\r\n  \r\n  const nameValue = inputName.value;\r\n  const descriptionValue = inputDescription.value\r\n\r\n  featchEditProfile(nameValue, descriptionValue)\r\n    .then((data) => {\r\n      profileTitle.textContent = data.name;\r\n      profileDescription.textContent = data.about;\r\n\r\n})\r\n    .catch((err) => {\r\n      console.log(err);\r\n})\r\n\r\n  profileButton.textContent = 'Сохранение....';\r\n  closePopup(popupEdit);\r\n}\r\n\r\nformEditProfile.addEventListener('submit', handleProfileFormSubmit);\r\n\r\nfunction handleFormSubmitAvatar(evt) {\r\n  evt.preventDefault();\r\n  \r\n  featchEditAvatar(inputAvatar.value)\r\n  .then((data) => {\r\n    inputAvatar.value = data.avatar; \r\n    profileImage.src = inputAvatar.value;\r\n    inputAvatar.value = '';\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  })\r\n\r\n  avatarButton.textContent = 'Сохранение....';\r\n  closePopup(formAvatarProfile);\r\n}\r\n\r\nformAvatarProfile.addEventListener('submit', handleFormSubmitAvatar);\r\n\r\nfunction handleFormSubmitNewCard(evt) {\r\n  evt.preventDefault();\r\n  \r\n  placesList.prepend(addCards(inputLink.value, inputCardName.value, cardId, 0, userId, userId, callBacks));\r\n  \r\n  featchNewCard(inputCardName.value, inputLink.value)\r\n  .then((data) => {\r\n    inputCardName.value = data.name;\r\n    inputLink.value = data.link; \r\n    inputLink.value = '';\r\n    inputCardName.value = '';\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n\r\n  newCardButton.textContent = 'Сохранение....';\r\n  closePopup(popupNewCard);\r\n}\r\n\r\nformNewCard.addEventListener('submit', handleFormSubmitNewCard);\r\n\r\n  function openPopupImage(evt) {\r\n  popupImageImage.src = evt.target.src;\r\n  popupImageCaption.textContent = evt.target.alt;\r\n  openPopup(popupImage);\r\n };\r\n \r\n enableValidation(validationConfig);\r\n\r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n"],"names":["openPopup","popup","classList","add","document","addEventListener","closePopupEsc","closePopup","remove","removeEventListener","evt","key","querySelector","config","baseUrl","headers","authorization","addCards","link","name","cardId","likes","userId","cardOwnerId","callBacks","templateElement","content","cloneNode","textContent","deleteButton","likeButton","cardImage","cardLikes","length","src","alt","contains","fetch","concat","method","then","res","ok","json","Promise","reject","status","featchDislikeCard","data","likeCallback","featchLikeCard","openPopupCallback","popupDeleteCard","deleteCallback","validationConfig","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","toggleButtonState","inputList","buttonElement","hasInvalidInput","disabled","some","inputElement","validity","valid","checkInputValidity","formElement","patternMismatch","setCustomValidity","dataset","errorMessage","hideInputError","errorElement","id","showInputError","validationMessage","clearValidation","Array","from","querySelectorAll","forEach","placesList","popupEdit","popupNewCard","popups","popupEditButton","popupNewCardButton","formEditProfile","formAvatarProfile","inputName","inputDescription","profileTitle","profileDescription","formNewCard","inputCardName","inputLink","popupImage","popupImageImage","popupImageCaption","popupEditAvatarButton","inputAvatar","avatarButton","newCardButton","profileButton","profileImage","target","featchDeleteCard","all","_ref","_ref2","userData","cards","about","avatar","_id","card","append","owner","catch","err","console","log","value","preventDefault","body","JSON","stringify","prepend","setEventListeners","enableValidation"],"sourceRoot":""}